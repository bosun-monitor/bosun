<div class="row" ng-show="error">
	<div class="col-lg-12">
		<div class="alert alert-danger" ng-bind="error"></div>
	</div>
</div>
<div ng-show="incident">
	<div class="row">
		<h3> Incident {{incident.Id}}: {{incident.AlertKey}} </h3>
	</div>

	<div class="row">
		<p ng-show="incident.End">End Time:<span ts-time="incident.Start" ts-end-time="incident.End" no-link="true"></span></p>
		<p ng-hide="incident.End">Start Time: <span ts-time="incident.Start" no-link="true" /> (Open)</p>
	</div>
	<div class="row" ng-show="actions.length">Actions</div>
	<div class="row" ng-hide="actions.length">No actions</div>
	<div class="row" ng-show="actions.length">
		<table class="table table-striped" style="width:100%">
			<thead>
				<td>Type</td>
				<td>User</td>
				<td>Message</td>
				<td>Time</td>
			</thead>
			<tbody>
				<tr ng-repeat="a in actions">
					<td ng-bind="a.Type"></td>
					<td ng-bind="a.User"></td>
					<td ng-bind="a.Message"></td>
					<td style="text-align:right;" ng-show="a.Time" ts-time="a.Time"></td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="row" ng-if="body">
		<h4>Last Abnormal Rendered Body</h4>
		<div class="col-sm-12">
			<hr/>
		</div>
		<div class="col-sm-12" ng-bind-html="body"></div>
	</div>
	<h4>Events</h4>
	<div class="panel" ng-class="panelClass(v.Status)" ng-repeat="($index, v) in events">
		<div class="panel-heading" ng-click="collapse($index, v)">
			<h4 class="panel-title">
				<a href>
					<span ng-bind="v.Status"></span>
					<span class="pull-right" ng-show="v.Time" ts-time="v.Time" ts-end-time="v.EndTime" no-link="true"></span>
				</a>
			</h4>
		</div>
		<div class="panel-body" ng-if="shown[$index]">
			<div ng-show="!v.doneLoading">Loading...</div>
			<div class="row" ng-show="v.error">
				<div class="col-lg-12">
					<pre class="alert alert-danger" ng-bind="v.error" style="white-space: pre-wrap;"></pre>
				</div>
			</div>
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Subject</h3>
				</div>
				<div class="panel-body template" ng-bind="v.subject"></div>
			</div>
			<div class="panel panel-default">
				<div class="panel-heading">
					<h3 class="panel-title">Body</h3>
				</div>
				<div class="panel-body template" ng-bind-html="v.body"></div>
			</div>
		</div>
	</div>
</div>